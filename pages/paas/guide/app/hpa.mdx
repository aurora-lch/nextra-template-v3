# 弹性伸缩管理

弹性伸缩管理是一种自动化的资源管理策略，它允许计算资源根据实时需求动态增加或减少。用于优化资源利用率，降低成本，并确保应用性能在高负载时不受影响。

## HPA 列表

HPA 是 Kubernetes 中的水平 Pod 自动伸缩器，它根据 CPU 使用率或其他选定的度量标准自动扩展或缩减 Pod 的数量。

![AIYCb4s6SotCEIxP1YtcN5y3n2g](/static/AIYCb4s6SotCEIxP1YtcN5y3n2g.png)

## **使用方法**

- **浏览数据**：在 HPA 管理页面，查看列出的 HPA 信息。点击右下方翻页按钮 \<、> 或具体页数，查看对应页面的 HPA 信息，还可以更改每页展示的条数以方便您的查看。
- **筛选所需话单：**可根据列表上方搜索栏的【集群】和【namespace】，输入想查找的信息，来筛选所需 HPA 信息。
- **创建新的 HPA**：点击【创建】按钮，按照向导部署新的 HPA。

## **创建 HPA 的步骤**

### 1. 填写基本信息

| **配置项**    | **描述**                                                     |
| ------------- | ------------------------------------------------------------ |
| **HPA 名称**  | 填写 HPA 的名称。                                            |
| **伸缩类型**  | **自定义扩缩容**：用户根据特定业务需求和性能指标，设置自定义的伸缩规则和参数。**水平伸缩**：通过增加或减少 Pod 副本的数量来扩展应用的容量。**水平伸缩-扩展指标**：基于特定的度量指标（如 CPU 使用率、内存使用率、请求延迟等）来触发 Pod 副本的增加或减少。**定时伸缩**：根据预定的时间表或周期性事件来调整 Pod 副本的数量。 |
| **所属集群**  | 从下拉列表中选择 HPA 将要部署的 Kubernetes 集群。            |
| **namespace** | 选择 HPA 将要使用的 Kubernetes 命名空间。                    |
| **服务**      | 选择 HPA 将要关联的 Kubernetes 服务。                        |
| **副本数量**  | 指定 HPA 管理的副本数量。                                    |
| **分类**      | 选择一个预定义的伸缩策略，或者创建自定义策略。               |
| **策略删除**  | 设置在自动缩容时使用的策略。                                 |
| **触发间隙**  | 设置触发自动缩容的时间间隙。                                 |
| **等待期**    | 设置在进行下一次缩容之前等待的时间。                         |

### 2. 填写详情信息

| **配置项**     | **描述**                                                     |
| -------------- | ------------------------------------------------------------ |
| **Prometheus** | 适用于记录各种服务和应用的运行指标。                         |
| **指标名称**   | 选择要监控的指标名称。                                       |
| **阈值**       | 设置指标的阈值。                                             |
| **表达式**     | 输入 Prometheus 查询语言（PromQL）表达式，用于实时计算和展示指标数据。 |

- 点击【＋ 添加】可以设置多个 Prometheus。

### 3. **创建**：完成所有配置项的添加后，点击【创建】按钮来生成 HPA。

![JzMvbAUCeo7HdLx0rimcmEw8nOe](/static/JzMvbAUCeo7HdLx0rimcmEw8nOe.jpg)

| **创建方式**       | **适用场景**                                 |
| ------------------ | -------------------------------------------- |
| **直接创建**       | 通过界面引导，逐步创建 HPA。                 |
| **批量导入**       | 导入后台已创建的 HPA。                       |
| **通过 YAML 创建** | 如您已具备创建的 Yaml 文件，可以选择该方式。 |